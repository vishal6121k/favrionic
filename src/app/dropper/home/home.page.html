<ion-content>
	<app-loccart show="0"></app-loccart>
	<div class="container-fluid">
		<div class="row">
			<div class="col-12">
				<div class="neg-mar" *ngIf="showMap == 1">
					<agm-map (mapReady)="mapReady()" [latitude]="deflat" [longitude]="deflng" [zoom]="zoom" [disableDefaultUI]="true">
					  	<agm-marker [animation]="shopperAnimation" [latitude]="lat" [longitude]="lng" [iconUrl]="'assets/icon/pin.png'"></agm-marker>
					  	<agm-circle [latitude]="lat" [longitude]="lng" [radius]="radius" [fillColor]="'blue'"></agm-circle>
					</agm-map>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-12">
				<div class="range-slider-wrap">
					<div class="range-labels">
						<span class="title">My Area</span>
						<span class="value">{{ defDist }} Km</span>
					</div>
					<div class="range-slider">
						<ion-range min="5" max="30" [value]="defDist" (ionChange)="changeDist($event)"></ion-range>
					</div>
				</div>
			</div>
		</div>
		 <!-- *ngIf="!shopperReq.length -->
		<div class="row">
			<div class="col-12">
				<img src="assets/loaders/searching.png" class="block center" />
				No shopper requests
			</div>
		</div>
		<div class="row" *ngIf="shopperReq.length">
			<div class="col-12">
				<h5 class="norm-title">
					Shopper Requests ({{ shopperReq.length }})
					<span class="norm-title-btn" (click)="notePop=1">
						<span class="icon"></span>
						Notify user
					</span>
				</h5>
				<p class="norm-sub">Choose one from below</p>
			</div>
			<div class="col-12">
				<div class="row">
					<div class="col-12">
						<div class="dropper-thumb" *ngFor="let req of shopperReq" (click)="viewOrderDetails(req.order_id)">
							<div class="img">
								<div class="img-in">
									<img src="assets/images/dp.jpg" />
								</div>
							</div>
							<div class="dets">
								<span class="title">{{ req.first_name+' '+req.last_name }}</span>
								<span class="sub">
									Offer price -
								</span>
							</div>
							<div class="rating">
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-empty"></span>
							</div>
						</div>
						<!-- <div class="dropper-thumb" (click)="dropPop=1">
							<div class="img">
								<div class="img-in">
									<img src="assets/images/dp.jpg" />
								</div>
							</div>
							<div class="dets">
								<span class="title">Shopper 1</span>
								<span class="sub">
									Offer price - 
									
								</span>
							</div>
							<div class="rating">
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-empty"></span>
							</div>
						</div>
						<div class="dropper-thumb" (click)="dropPop=1">
							<div class="img">
								<div class="img-in">
									<img src="assets/images/dp.jpg" />
								</div>
							</div>
							<div class="dets">
								<span class="title">Shopper 1</span>
								<span class="sub">
									Offer price - 
									
								</span>
							</div>
							<div class="rating">
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-empty"></span>
							</div>
						</div> -->
					</div>
					<!-- <div class="col-12">
						<div class="row mb-20">
							<div class="col-10 offset-1">
								<div class="form-row">
									<button routerLink="/shopper/track" class="btn btn-primary btn-full">Accept Dropper</button>
								</div>
							</div>
						</div>
					</div> -->
				</div>
			</div>
			<!-- <div class="col-12">
				<p class="norm-sub">Outside your radius</p>
			</div> -->

			<!-- <div class="col-12">
				<div class="row">
					<div class="col-12">
						<div class="dropper-thumb" (click)="dropPop=1">
							<div class="img">
								<div class="img-in">
									<img src="assets/images/dp.jpg" />
								</div>
							</div>
							<div class="dets">
								<span class="title">Shopper 1</span>
								<span class="sub">
									Offer price - 
									
								</span>
							</div>
							<div class="rating">
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-empty"></span>
							</div>
						</div>
						<div class="dropper-thumb" (click)="dropPop=1">
							<div class="img">
								<div class="img-in">
									<img src="assets/images/dp.jpg" />
								</div>
							</div>
							<div class="dets">
								<span class="title">Shopper 1</span>
								<span class="sub">
									Offer price - 
									
								</span>
							</div>
							<div class="rating">
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-full"></span>
								<span class="rate-empty"></span>
							</div>
						</div>
					</div>
				</div>
			</div> -->
		</div>
	</div>
	<div class="section"></div>
</ion-content>
<div class="overlay" [class.active]="notePop==1 || dropPop==1 || reqPop == 1" (click)="notePop=0; dropPop=0;"></div>
<div class="notify-popup" [class.active]="notePop==1" (click)="notePop=0">
	<span class="icon">
		<img src="assets/images/check.png" />
	</span>
	<p class="flow-text">We Notified <span class="blck small bold">10 User</span></p>
</div>
<div class="drop-req-popup" *ngIf="dropPop==1" [class.active]="dropPop==1">
	<span class="close" (click)="dropPop=0">&times;</span>
	<div class="dropper-thumb">
		<div class="img">
			<div class="img-in">
				<img src="assets/images/dp.jpg" />
			</div>
		</div>
		<div class="dets">
			<span class="title">{{ orderDets.caller_name }}</span>
			<!-- <span class="sub">
				Offer price - 
				
			</span> -->
		</div>
		<div class="rating">
			<span class="rate-full"></span>
			<span class="rate-full"></span>
			<span class="rate-full"></span>
			<span class="rate-full"></span>
			<span class="rate-empty"></span>
		</div>
	</div>
	<div class="drop-list-items">
		<div class="drop-list-item">
			<span class="title">Number of items</span>
			<span class="dots"></span>
			<span class="value">{{ orderDets.total_items }}</span>
		</div>
		<div class="drop-list-item">
			<span class="title">Estimated cost of items</span>
			<span class="dots"></span>
			<span class="value">&#8364; {{ orderDets.total_amount }}</span>
		</div>
		<div class="drop-list-item bold">
			<span class="title">Shopper's total offer</span>
			<span class="dots"></span>
			<span class="value">&#8364; 15</span>
		</div>
		<div class="drop-list-item">
			<span class="title">You Earn</span>
			<span class="dots"></span>
			<span class="value">&#8364; 5</span>
		</div>
		<div class="drop-list-item bold">
			<span class="title">Mode of payment</span>
			<span class="dots"></span>
			<span class="value">
				<span *ngIf="orderDets.payment_type == 1">Cash</span>
				<span *ngIf="orderDets.payment_type == 2">Google Pay</span>
				<span *ngIf="orderDets.payment_type == 3">Apple Pay</span>
			</span>
		</div>
	</div>
	<div class="form-row">
		<!-- <button (click)="reqPop = 1; dropPop = 0;" class="btn btn-primary btn-full">Accept Offer</button> -->
		<button (click)="acceptShopperOffer(orderDets.id)" class="btn btn-primary btn-full">Accept Offer</button>
	</div>
</div>